window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){window.setTimeout(i,42)}}(),function(i){"use strict";var o={},n={};n.topics={"*":i.Callbacks("unique memory")},o.publish=function(){var i=[].slice.call(arguments);i.unshift(window),o.publishWith.apply(this,i)},o.publishWith=function(o,s){var e,t,u,r,c;for(c=[].slice.call(arguments),c.shift(),c.shift(),s=n.parse_topics(s),t=s.length,e=0;t>e;e++){for(u=s[e].split(".");u.length;)r=u.join("."),u.pop(),n.topics[r]||(n.topics[r]=i.Callbacks("unique memory")),n.publish(o,r,s[e],c);n.publish(o,"*",s[e],c)}},o.subscribe=function(o,s){i.isFunction(s)||console.error("You must subscribe with a function",arguments);var e,t,u;for(o=n.parse_topics(o),t=o.length,e=0;t>e;e++)u=o[e],n.topics[u]||(n.topics[u]=i.Callbacks("unique memory")),n.topics[u].add(s)},o.unsubscribe=function(o,s){i.isFunction(s)||console.error("You must unsubscribe with a function");var e,t,u;for(o=n.parse_topics(o),t=o.length,e=0;t>e;e++)u=o[e],n.topics[u]&&n.topics[u].remove(s)},o.clear=function(o){n.topics[o]=i.Callbacks("unique memory")},o.purge=function(){var i;for(i in n.topics)n.topics.hasOwnProperty(i)&&o.clear(i)},n.parse_topics=function(i){return i.split(" ")},n.publish=function(i,o,s,e){e=e.slice(),n.topics[o]&&s&&(e.unshift(s),window.requestAnimFrame(function(){n.topics[o].fireWith(i,e)}))},o.subscribe("*",function(i){if(console){var o=Array.prototype.slice.call(arguments,1);console.group?(console.group("PubSub Super Listner"),console.debug("Topic: ",i),console.debug("Arguments: ",o),console.groupEnd("PubSub Super Listner")):console.log("PubSub Super Listner: ",i,o)}}),i.pubsub=o}(jQuery);